★テーブル（login_info）

①id　　　　INT UNSIGNED型　　（AUTO_INCREMENT）　PRIMARY KEY

②user 　　 VARCHAR型　NOT NULL(必須項目)　　　　 UNIQUE

③email     VARCHAR型　NOT NULL(必須項目)         UNIQUE

④password  VARCHAR型　NOT NULL(必須項目)


※VARCHAR 可変長で入るデータの長さが決まっていないときに向く


★テーブル（gazokeijiban）

①id　　　　INT UNSIGNED型　　（AUTO_INCREMENT）　PRIMARY KEY

②login_info_id　INT UNSIGNED型　　FOREIGN KEY

③title     VARCHAR型

④comment 　TEXT型

⑤image_url VARCHAR型

⑥savedate  DATETIME型

※authorのカラムをなくし、login_infoのuserから取得するようにする


■新規登録画面

（画面の役割）

登録情報を入力し「新規登録」ボタンを押して登録する

・ユーザ名（半角英数）

・メールアドレス（半角英数）

・パスワード（半角英数）

「新規登録」ボタン

ログイン画面へのリンク（既に登録されている方はこちら）


（処理）

＜バリデーション＞

・全角文字で入力されていたら「半角英数で入力してください」と画面に表示
・空白未入力だったら「入力されていない項目があります」と画面に表示
・メールアドレスに@が入っていなかったら「不正なメールアドレスです」と画面に表示

＜登録処理＞

・login_infoと照合し、登録されているユーザ名であれば「ユーザ名は既に使われています」と画面に表示
・login_infoと照合し、登録されているメールアドレスであれば「既にメールアドレスが登録されています」と画面に表示
・ユーザ名・メールアドレスともに新規のものであればデータをlogin_infoに新規追加
※password_hash()関数を用いて、パスワードは暗号化して追加する
⇒新規追加に成功したら「新規会員登録が完了しました」とアラートを表示



■ログイン画面

（画面の役割）

登録情報を入力し「ログイン」ボタンを押してログインする

・メールアドレス（半角英数）

・パスワード（半角英数）

「ログイン」ボタン

新規会員登録画面へのリンク（初めて登録する方はこちら）

（処理）

＜バリデーション＞

・全角文字で入力されていたら「半角英数で入力してください」と画面に表示
・空白未入力だったら「入力されていない項目があります」と画面に表示
・メールアドレスに@が入っていなかったら「不正なメールアドレスです」と画面に表示


＜ログイン処理＞

パスワードの照合にはpassword_verify()関数を使用

・login_infoと照合し、登録されている「メールアドレス」と「パスワード」が一致すればログイン成功
⇒ログインに成功したらトップ画面を表示

・login_infoと照合し、登録されている「メールアドレス」と「パスワード」が不一致の場合には
「メールアドレスとパスワードの組み合わせが誤っています」と画面に表示



■トップ画面

（画面の役割）

「ようこそ！（ユーザ名）さん」と画面に表示

・「ログアウト」ボタン


（処理）

・ログイン画面から遷移するときに、メールアドレス(email)・パスワード(password)の情報を引き継ぎ
　login_infoからユーザー名（user）を取得し、ユーザ名を画面に表示


・「ログアウト」ボタンを押したらログイン画面に遷移する



※補足
ログインせずに直接トップ画面にアクセスした場合、ログイン画面にリダイレクトさせる